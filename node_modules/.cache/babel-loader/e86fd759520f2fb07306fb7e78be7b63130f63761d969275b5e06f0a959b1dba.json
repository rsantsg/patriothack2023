{"ast":null,"code":"\"use strict\";\n\nlet greedyFAS = require(\"./greedy-fas\");\nlet uniqueId = require(\"./util\").uniqueId;\nmodule.exports = {\n  run: run,\n  undo: undo\n};\nfunction run(g) {\n  let fas = g.graph().acyclicer === \"greedy\" ? greedyFAS(g, weightFn(g)) : dfsFAS(g);\n  fas.forEach(e => {\n    let label = g.edge(e);\n    g.removeEdge(e);\n    label.forwardName = e.name;\n    label.reversed = true;\n    g.setEdge(e.w, e.v, label, uniqueId(\"rev\"));\n  });\n  function weightFn(g) {\n    return e => {\n      return g.edge(e).weight;\n    };\n  }\n}\nfunction dfsFAS(g) {\n  let fas = [];\n  let stack = {};\n  let visited = {};\n  function dfs(v) {\n    if (visited.hasOwnProperty(v)) {\n      return;\n    }\n    visited[v] = true;\n    stack[v] = true;\n    g.outEdges(v).forEach(e => {\n      if (stack.hasOwnProperty(e.w)) {\n        fas.push(e);\n      } else {\n        dfs(e.w);\n      }\n    });\n    delete stack[v];\n  }\n  g.nodes().forEach(dfs);\n  return fas;\n}\nfunction undo(g) {\n  g.edges().forEach(e => {\n    let label = g.edge(e);\n    if (label.reversed) {\n      g.removeEdge(e);\n      let forwardName = label.forwardName;\n      delete label.reversed;\n      delete label.forwardName;\n      g.setEdge(e.w, e.v, label, forwardName);\n    }\n  });\n}","map":{"version":3,"names":["greedyFAS","require","uniqueId","module","exports","run","undo","g","fas","graph","acyclicer","weightFn","dfsFAS","forEach","e","label","edge","removeEdge","forwardName","name","reversed","setEdge","w","v","weight","stack","visited","dfs","hasOwnProperty","outEdges","push","nodes","edges"],"sources":["/Users/ron/Documents/developer/patriothack/node_modules/@dagrejs/dagre/lib/acyclic.js"],"sourcesContent":["\"use strict\";\n\nlet greedyFAS = require(\"./greedy-fas\");\nlet uniqueId = require(\"./util\").uniqueId;\n\nmodule.exports = {\n  run: run,\n  undo: undo\n};\n\nfunction run(g) {\n  let fas = (g.graph().acyclicer === \"greedy\"\n    ? greedyFAS(g, weightFn(g))\n    : dfsFAS(g));\n  fas.forEach(e => {\n    let label = g.edge(e);\n    g.removeEdge(e);\n    label.forwardName = e.name;\n    label.reversed = true;\n    g.setEdge(e.w, e.v, label, uniqueId(\"rev\"));\n  });\n\n  function weightFn(g) {\n    return e => {\n      return g.edge(e).weight;\n    };\n  }\n}\n\nfunction dfsFAS(g) {\n  let fas = [];\n  let stack = {};\n  let visited = {};\n\n  function dfs(v) {\n    if (visited.hasOwnProperty(v)) {\n      return;\n    }\n    visited[v] = true;\n    stack[v] = true;\n    g.outEdges(v).forEach(e => {\n      if (stack.hasOwnProperty(e.w)) {\n        fas.push(e);\n      } else {\n        dfs(e.w);\n      }\n    });\n    delete stack[v];\n  }\n\n  g.nodes().forEach(dfs);\n  return fas;\n}\n\nfunction undo(g) {\n  g.edges().forEach(e => {\n    let label = g.edge(e);\n    if (label.reversed) {\n      g.removeEdge(e);\n\n      let forwardName = label.forwardName;\n      delete label.reversed;\n      delete label.forwardName;\n      g.setEdge(e.w, e.v, label, forwardName);\n    }\n  });\n}\n"],"mappings":"AAAA,YAAY;;AAEZ,IAAIA,SAAS,GAAGC,OAAO,CAAC,cAAc,CAAC;AACvC,IAAIC,QAAQ,GAAGD,OAAO,CAAC,QAAQ,CAAC,CAACC,QAAQ;AAEzCC,MAAM,CAACC,OAAO,GAAG;EACfC,GAAG,EAAEA,GAAG;EACRC,IAAI,EAAEA;AACR,CAAC;AAED,SAASD,GAAGA,CAACE,CAAC,EAAE;EACd,IAAIC,GAAG,GAAID,CAAC,CAACE,KAAK,CAAC,CAAC,CAACC,SAAS,KAAK,QAAQ,GACvCV,SAAS,CAACO,CAAC,EAAEI,QAAQ,CAACJ,CAAC,CAAC,CAAC,GACzBK,MAAM,CAACL,CAAC,CAAE;EACdC,GAAG,CAACK,OAAO,CAACC,CAAC,IAAI;IACf,IAAIC,KAAK,GAAGR,CAAC,CAACS,IAAI,CAACF,CAAC,CAAC;IACrBP,CAAC,CAACU,UAAU,CAACH,CAAC,CAAC;IACfC,KAAK,CAACG,WAAW,GAAGJ,CAAC,CAACK,IAAI;IAC1BJ,KAAK,CAACK,QAAQ,GAAG,IAAI;IACrBb,CAAC,CAACc,OAAO,CAACP,CAAC,CAACQ,CAAC,EAAER,CAAC,CAACS,CAAC,EAAER,KAAK,EAAEb,QAAQ,CAAC,KAAK,CAAC,CAAC;EAC7C,CAAC,CAAC;EAEF,SAASS,QAAQA,CAACJ,CAAC,EAAE;IACnB,OAAOO,CAAC,IAAI;MACV,OAAOP,CAAC,CAACS,IAAI,CAACF,CAAC,CAAC,CAACU,MAAM;IACzB,CAAC;EACH;AACF;AAEA,SAASZ,MAAMA,CAACL,CAAC,EAAE;EACjB,IAAIC,GAAG,GAAG,EAAE;EACZ,IAAIiB,KAAK,GAAG,CAAC,CAAC;EACd,IAAIC,OAAO,GAAG,CAAC,CAAC;EAEhB,SAASC,GAAGA,CAACJ,CAAC,EAAE;IACd,IAAIG,OAAO,CAACE,cAAc,CAACL,CAAC,CAAC,EAAE;MAC7B;IACF;IACAG,OAAO,CAACH,CAAC,CAAC,GAAG,IAAI;IACjBE,KAAK,CAACF,CAAC,CAAC,GAAG,IAAI;IACfhB,CAAC,CAACsB,QAAQ,CAACN,CAAC,CAAC,CAACV,OAAO,CAACC,CAAC,IAAI;MACzB,IAAIW,KAAK,CAACG,cAAc,CAACd,CAAC,CAACQ,CAAC,CAAC,EAAE;QAC7Bd,GAAG,CAACsB,IAAI,CAAChB,CAAC,CAAC;MACb,CAAC,MAAM;QACLa,GAAG,CAACb,CAAC,CAACQ,CAAC,CAAC;MACV;IACF,CAAC,CAAC;IACF,OAAOG,KAAK,CAACF,CAAC,CAAC;EACjB;EAEAhB,CAAC,CAACwB,KAAK,CAAC,CAAC,CAAClB,OAAO,CAACc,GAAG,CAAC;EACtB,OAAOnB,GAAG;AACZ;AAEA,SAASF,IAAIA,CAACC,CAAC,EAAE;EACfA,CAAC,CAACyB,KAAK,CAAC,CAAC,CAACnB,OAAO,CAACC,CAAC,IAAI;IACrB,IAAIC,KAAK,GAAGR,CAAC,CAACS,IAAI,CAACF,CAAC,CAAC;IACrB,IAAIC,KAAK,CAACK,QAAQ,EAAE;MAClBb,CAAC,CAACU,UAAU,CAACH,CAAC,CAAC;MAEf,IAAII,WAAW,GAAGH,KAAK,CAACG,WAAW;MACnC,OAAOH,KAAK,CAACK,QAAQ;MACrB,OAAOL,KAAK,CAACG,WAAW;MACxBX,CAAC,CAACc,OAAO,CAACP,CAAC,CAACQ,CAAC,EAAER,CAAC,CAACS,CAAC,EAAER,KAAK,EAAEG,WAAW,CAAC;IACzC;EACF,CAAC,CAAC;AACJ"},"metadata":{},"sourceType":"script","externalDependencies":[]}